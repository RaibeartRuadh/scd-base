{% extends "base.html" %}

{% block title %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–Ω—Ü–µ–≤{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: "{{ query }}"</h1>
        <div>
            <a href="{{ url_for('search.advanced_search') }}" class="btn btn-outline-primary me-2">üìã –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫</a>
            <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">‚Üê –ù–∞–∑–∞–¥</a>
        </div>
    </div>

    {% if results %}
    <div class="alert alert-success">
        –ù–∞–π–¥–µ–Ω–æ —Ç–∞–Ω—Ü–µ–≤: <strong>{{ total_count }}</strong> –ø–æ –∑–∞–ø—Ä–æ—Å—É: "<strong>{{ query }}</strong>"
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ê–≤—Ç–æ—Ä</th>
                    <th>–¢–∏–ø</th>
                    <th>–†–∞–∑–º–µ—Ä</th>
                    <th>–§–æ—Ä–º–∞—Ç</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for dance in results %}
                <tr>
                    <td>
                        <strong>{{ dance.name }}</strong>
                        {% if dance.published %}
                        <br><small class="text-muted">{{ dance.published }}</small>
                        {% endif %}
                    </td>
                    <td>{{ dance.author or '-' }}</td>
                    <td>
                        {% if dance.dance_type_rel %}
                        <span class="badge 
                            {% if dance.dance_type_rel.name == 'Reel' %}bg-primary
                            {% elif dance.dance_type_rel.name == 'Jig' %}bg-success
                            {% elif dance.dance_type_rel.name == 'Strathspey' %}bg-warning
                            {% else %}bg-secondary{% endif %}">
                            {{ dance.dance_type_rel.name }}
                        </span>
                        {% else %}
                        <span class="badge bg-secondary">-</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if dance.count_id and dance.size_id %}
                            {{ dance.count_id }}x{{ dance.size_id }}
                        {% elif dance.size_id %}
                            {{ dance.size_id }} —Ç–∞–∫—Ç–æ–≤
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>{{ dance.dance_format_rel.name if dance.dance_format_rel else '-' }}</td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <a href="{{ url_for('view_dance', dance_id=dance.id) }}" 
                               class="btn btn-outline-info" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                <i class="fas fa-eye"></i>
                            </a>
                            <a href="{{ url_for('dance_files', dance_id=dance.id) }}" 
                               class="btn btn-outline-success" title="–§–∞–π–ª—ã">
                                <i class="fas fa-folder"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-warning text-center py-5">
        <h4>üòî –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h4>
        <p>–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É "<strong>{{ query }}</strong>" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
        <div class="mt-3">
            <a href="{{ url_for('search.advanced_search') }}" class="btn btn-primary me-2">üìã –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫</a>
            <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ç–∞–ª–æ–≥—É</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}