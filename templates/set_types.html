{% extends "base.html" %}
[file name]: set_types.html
[file content begin]
{% block title %}Управление типами сетов - База данных танцев{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">Управление типами сетов</h1>
    <div>
        <a href="{{ url_for('index') }}" class="btn btn-outline-secondary btn-sm me-2">
            <i class="fas fa-arrow-left me-1"></i>Назад
        </a>
        <a href="{{ url_for('add_set_type') }}" class="btn btn-primary btn-sm">
            <i class="fas fa-plus me-1"></i>Добавить тип
        </a>
    </div>
</div>

<div class="card border-0 shadow-sm">
    <div class="card-body p-0">
        {% if set_types %}
        <div class="table-responsive">
            <table class="table table-hover mb-0 table-compact">
                <thead class="table-dark">
                    <tr>
                        <th width="60" class="ps-3">ID</th>
                        <th class="px-2">Название</th>
                        <th class="px-2">Описание</th>
                        <th class="px-2">Кол-во танцев</th>
                        <th class="px-2">Дата создания</th>
                        <th width="120" class="px-2 text-center">Действия</th>
                    </tr>
                </thead>
                <tbody>
                    {% for set_type in set_types|sort(attribute='id') %}
                    <tr class="align-middle">
                        <td class="ps-3">
                            <strong class="text-muted">{{ set_type.id }}</strong>
                        </td>
                        <td class="px-2">
                            <span class="fw-bold text-dark">{{ set_type.name }}</span>
                        </td>
                        <td class="px-2">
                            {% if set_type.description %}
                                <span class="text-muted small">{{ set_type.description|truncate(50) }}</span>
                            {% else %}
                                <span class="text-muted small">—</span>
                            {% endif %}
                        </td>
                        <td class="px-2">
                            <span class="badge {% if set_type.dances|length > 0 %}bg-primary{% else %}bg-secondary{% endif %} badge-type">
                                {{ set_type.dances|length }}
                            </span>
                        </td>
                        <td class="px-2">
                            <small class="text-muted">
                                {{ set_type.created_at.strftime('%d.%m.%Y %H:%M') if set_type.created_at else '—' }}
                            </small>
                        </td>
                        <td class="px-2 text-center">
                            <div class="d-flex justify-content-center align-items-center gap-2" style="min-height: 40px;">
                                <!-- Редактировать -->
                                <a href="{{ url_for('edit_set_type', type_id=set_type.id) }}" 
                                   class="material-icon-action" 
                                   title="Редактировать">
                                    <img src="{{ url_for('static', filename='img/edit.png') }}" alt="Редактировать" style="width: 25px; height: 25px;">
                                </a>
                                
                                <!-- Удалить -->
                                {% if set_type.dances|length == 0 %}
                                <form method="POST" action="{{ url_for('delete_set_type', type_id=set_type.id) }}" 
                                      class="d-inline m-0"
                                      onsubmit="return confirm('Вы уверены, что хотите удалить тип сета «{{ set_type.name }}»?');">
                                    <button type="submit" class="material-icon-action btn p-0 border-0 bg-transparent" title="Удалить">
                                        <img src="{{ url_for('static', filename='img/trash.png') }}" alt="Удалить" style="width: 25px; height: 25px;">
                                    </button>
                                </form>
                                {% else %}
                                <button type="button" class="material-icon-action btn p-0 border-0 bg-transparent" disabled title="Нельзя удалить - используется в танцах">
                                    <img src="{{ url_for('static', filename='img/trash.png') }}" alt="Удалить" style="width: 25px; height: 25px; opacity: 0.3;">
                                </button>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="mt-3 text-muted text-center">
            <small>Всего типов сетов: {{ set_types|length }}</small>
        </div>
        {% else %}
        <div class="text-center py-5">
            <div class="mb-3">
                <i class="fas fa-users fa-3x text-muted mb-3"></i>
            </div>
            <h6 class="text-muted mb-2">Типы сетов не найдены</h6>
            <p class="text-muted mb-3 small">Добавьте первый тип сета, чтобы начать работу</p>
            <a href="{{ url_for('add_set_type') }}" class="btn btn-primary btn-sm">
                <i class="fas fa-plus me-1"></i>Добавить тип сета
            </a>
        </div>
        {% endif %}
    </div>
</div>

<div class="mt-4">
    <div class="alert alert-info border-0">
        <h6 class="mb-2"><i class="fas fa-info-circle me-2"></i>Информация о типах сетов:</h6>
        <ul class="mb-0 small">
            <li>Типы сетов определяют формацию танца (Longwise, Square, Triangular, Circular)</li>
            <li>Каждый тип сета имеет уникальное название и описание</li>
            <li>Нельзя удалить тип сета, который используется в существующих танцах</li>
            <li>Типы сетов помогают классифицировать танцы по формации исполнения</li>
        </ul>
    </div>
</div>

<style>
.table-compact td {
    padding: 8px 10px;
    font-size: 0.82rem;
    vertical-align: middle;
    height: 40px;
}

.table-compact th {
    padding: 10px;
    font-size: 0.78rem;
    vertical-align: middle;
}

.badge-type {
    font-size: 0.65rem;
    padding: 0.25rem 0.5rem;
    vertical-align: middle;
    display: inline-block;
    line-height: 1;
}

/* Стили для иконок действий как на index.html */
.material-icon-action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    opacity: 0.8;
    padding: 2px;
    border-radius: 4px;
}

.material-icon-action:hover {
    opacity: 1;
    transform: scale(1.1);
    background-color: rgba(0, 0, 0, 0.05);
}

/* Выравнивание группы иконок */
.d-flex.gap-2 {
    gap: 0.5rem !important;
}

/* Выравнивание столбца действий */
.table td:last-child {
    vertical-align: middle;
}

/* Стиль для отключенной иконки */
.material-icon-action:disabled img {
    opacity: 0.3;
    cursor: not-allowed;
}
</style>
{% endblock %}
[file content end]