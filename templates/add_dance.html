{% extends "base.html" %}

{% block title %}Добавить танец - База данных танцев{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-10 mx-auto">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h2 class="card-title mb-0">Добавить новый танец</h2>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="name" class="form-label">Наименование *</label>
                            <input type="text" class="form-control" id="name" name="name" required 
                                   placeholder="Введите название танца">
                        </div>
                        <div class="col-md-6">
                            <label for="author" class="form-label">Автор</label>
                            <input type="text" class="form-control" id="author" name="author" 
                                   placeholder="Автор танца">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label for="dance_type" class="form-label">Тип танца *</label>
                            <select class="form-select" id="dance_type" name="dance_type" required>
                                <option value="">Выберите тип танца</option>
                                {% if dance_types %}
                                    {% for dance_type in dance_types %}
                                    <option value="{{ dance_type.id }}">{{ dance_type.name }}</option>
                                    {% endfor %}
                                {% endif %}
                            </select>
                            <div class="form-text">
                                <a href="{{ url_for('manage_dance_types') }}" class="text-decoration-none">
                                    + Добавить новый тип танца
                                </a>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <label for="count_id" class="form-label">Повторы</label>
                            <input type="number" class="form-control" id="count_id" name="count_id" 
                                   min="0" placeholder="">
                        </div>
                        <div class="col-md-2">
                            <label for="size_id" class="form-label">Размер (такты)</label>
                            <input type="number" class="form-control" id="size_id" name="size_id" 
                                   min="0" placeholder="">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label for="dance_couple" class="form-label">Танцующие пары/танцоров</label>
                            <input type="text" class="form-control" id="dance_couple" name="dance_couple" 
                                   placeholder="Укажите число">
                        </div>
                        <div class="col-md-3">
                            <label for="dance_format" class="form-label">Всего пар/танцоров в танце</label>
                            <select class="form-select" id="dance_format" name="dance_format">
                                <option value=""></option>
                                {% if dance_formats %}
                                    {% for format in dance_formats %}
                                    <option value="{{ format.id }}">{{ format.name }}</option>
                                    {% endfor %}
                                {% endif %}
                            </select>
                            <div class="form-text">
                                <a href="{{ url_for('manage_dance_formats') }}" class="text-decoration-none">
                                    + Добавить/изменить формат сета
                                </a>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <label for="set_type" class="form-label">Построение сета</label>
                            <select class="form-select" id="set_type" name="set_type">
                                <option value="">Выберите тип сета</option>
                                {% if set_types %}
                                    {% for set_type in set_types %}
                                    <option value="{{ set_type.id }}">{{ set_type.name }}</option>
                                    {% endfor %}
                                {% endif %}
                            </select>
                            <div class="form-text">
                                <a href="{{ url_for('manage_set_types') }}" class="text-decoration-none">
                                    + Добавить/изменить тип сета
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- ДОБАВЛЕНО: Поле RSCDS -->
                    <div class="row mb-3">
                        <div class="col-md-12">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="rscds" name="rscds" value="true">
                                <label class="form-check-label" for="rscds">
                                    RSCDS HQ publication
                                </label>
                            </div>
                            <div class="form-text">
                                Отметьте, если танец является публикацией штаб-квартиры RSCDS
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="description" class="form-label">Описание танца</label>
                        <textarea class="form-control" id="description" name="description" rows="6" 
                                  placeholder="Подробное описание танца, последовательность фигур..."></textarea>
                    </div>

                    <!-- ДОБАВЛЕНО: Поле description2 -->
                    <div class="mb-3">
                        <label for="description2" class="form-label">Дополнительное описание</label>
                        <textarea class="form-control" id="description2" name="description2" rows="4" 
                                  placeholder="Дополнительная информация о танце..."></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="published" class="form-label">Публикация</label>
                        <input type="text" class="form-control" id="published" name="published" 
                               placeholder="Укажите книгу или источник, в котором была публикация">
                    </div>

                    <div class="mb-3">
                        <label for="note" class="form-label">Заметки</label>
                        <textarea class="form-control" id="note" name="note" rows="3" 
                                  placeholder="Дополнительная информация о танце, истории и т.п."></textarea>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{{ url_for('index') }}" class="btn btn-secondary me-md-2">Отмена</a>
                        <button type="submit" class="btn btn-primary">Сохранить танец</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}