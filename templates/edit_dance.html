{% extends "base.html" %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–Ω–µ—Ü - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–Ω—Ü–µ–≤{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-10 mx-auto">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h2 class="card-title mb-0">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–Ω–µ—Ü</h2>
                <div>
                    <a href="{{ url_for('view_dance', dance_id=dance.id) }}" class="btn btn-outline-secondary btn-sm me-2">üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä</a>
                    <a href="{{ url_for('manage_set_types') }}" class="btn btn-outline-secondary btn-sm me-2">‚öôÔ∏è –¢–∏–ø—ã —Å–µ—Ç–æ–≤</a>
                    <a href="{{ url_for('manage_dance_types') }}" class="btn btn-outline-secondary btn-sm">‚öôÔ∏è –¢–∏–ø—ã —Ç–∞–Ω—Ü–µ–≤</a>
                </div>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="name" class="form-label">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ *</label>
                            <input type="text" class="form-control" id="name" name="name" required 
                                   value="{{ dance.name }}"
                                   placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–Ω—Ü–∞">
                        </div>
                        <div class="col-md-6">
                            <label for="author" class="form-label">–ê–≤—Ç–æ—Ä</label>
                            <input type="text" class="form-control" id="author" name="author" 
                                   value="{{ dance.author or '' }}"
                                   placeholder="–ê–≤—Ç–æ—Ä —Ç–∞–Ω—Ü–∞">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label for="dance_type" class="form-label">–¢–∏–ø —Ç–∞–Ω—Ü–∞ *</label>
                            <select class="form-select" id="dance_type" name="dance_type" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ç–∞–Ω—Ü–∞</option>
                                {% if dance_types %}
                                    {% for dance_type in dance_types %}
                                    <option value="{{ dance_type.id }}" 
                                            {% if dance.dance_type_id == dance_type.id %}selected{% endif %}>
                                        {{ dance_type.name }}
                                    </option>
                                    {% endfor %}
                                {% endif %}
                            </select>
                            <div class="form-text">
                                <a href="{{ url_for('manage_dance_types') }}" class="text-decoration-none">
                                    + –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø —Ç–∞–Ω—Ü–∞
                                </a>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label for="count_id" class="form-label">–ü–æ–≤—Ç–æ—Ä—ã</label>
                            <input type="number" class="form-control" id="count_id" name="count_id" 
                                   value="{{ dance.count_id or '' }}"
                                   min="0" placeholder="8">
                        </div>
                        <div class="col-md-4">
                            <label for="size_id" class="form-label">–†–∞–∑–º–µ—Ä (—Ç–∞–∫—Ç—ã)</label>
                            <input type="number" class="form-control" id="size_id" name="size_id" 
                                   value="{{ dance.size_id or '' }}"
                                   min="0" placeholder="32">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="dance_format" class="form-label">–§–æ—Ä–º–∞—Ç —Å–µ—Ç–∞</label>
                            <select class="form-select" id="dance_format" name="dance_format">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Å–µ—Ç–∞</option>
                                {% if dance_formats %}
                                    {% for format in dance_formats %}
                                    <option value="{{ format.id }}" 
                                            {% if dance.dance_format_id == format.id %}selected{% endif %}>
                                        {{ format.name }}
                                    </option>
                                    {% endfor %}
                                {% endif %}
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="dance_couple" class="form-label">–¢–∞–Ω—Ü—É—é—â–∏–µ –ø–∞—Ä—ã</label>
                            <input type="text" class="form-control" id="dance_couple" name="dance_couple" 
                                   value="{{ dance.dance_couple or '' }}"
                                   placeholder="3C">
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="set_type" class="form-label">–¢–∏–ø —Å–µ—Ç–∞</label>
                        <select class="form-select" id="set_type" name="set_type">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Å–µ—Ç–∞</option>
                            {% if set_types %}
                                {% for set_type in set_types %}
                                <option value="{{ set_type.id }}" 
                                        {% if dance.set_type_id == set_type.id %}selected{% endif %}>
                                    {{ set_type.name }}
                                </option>
                                {% endfor %}
                            {% endif %}
                        </select>
                        <div class="form-text">
                            <a href="{{ url_for('manage_set_types') }}" class="text-decoration-none">
                                + –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø —Å–µ—Ç–∞
                            </a>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="description" class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–Ω—Ü–∞</label>
                        <textarea class="form-control" id="description" name="description" rows="6" 
                                  placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–Ω—Ü–∞, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–≥—É—Ä...">{{ dance.description or '' }}</textarea>
                    </div>

                    <div class="mb-3">
                        <label for="published" class="form-label">–ü—É–±–ª–∏–∫–∞—Ü–∏—è</label>
                        <input type="text" class="form-control" id="published" name="published" 
                               value="{{ dance.published or '' }}"
                               placeholder="Published book 32">
                    </div>

                    <div class="mb-3">
                        <label for="note" class="form-label">–ó–∞–º–µ—Ç–∫–∏</label>
                        <textarea class="form-control" id="note" name="note" rows="3" 
                                  placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏...">{{ dance.note or '' }}</textarea>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{{ url_for('view_dance', dance_id=dance.id) }}" class="btn btn-secondary me-md-2">–û—Ç–º–µ–Ω–∞</a>
                        <button type="submit" class="btn btn-primary">–û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–Ω–µ—Ü</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞–Ω—Ü–µ -->
        <div class="card mt-4">
            <div class="card-header">
                <h5 class="card-title mb-0">üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø–∏—Å–∏</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>ID –∑–∞–ø–∏—Å–∏:</strong> {{ dance.id }}</p>
                        <p><strong>–¢–∏–ø —Ç–∞–Ω—Ü–∞:</strong> {{ dance.dance_type_rel.name if dance.dance_type_rel else '–ù–µ —É–∫–∞–∑–∞–Ω' }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>–§–æ—Ä–º–∞—Ç —Å–µ—Ç–∞:</strong> {{ dance.dance_format_rel.name if dance.dance_format_rel else '–ù–µ —É–∫–∞–∑–∞–Ω' }}</p>
                        <p><strong>–¢–∏–ø —Å–µ—Ç–∞:</strong> {{ dance.set_type_rel.name if dance.set_type_rel else '–ù–µ —É–∫–∞–∑–∞–Ω' }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}